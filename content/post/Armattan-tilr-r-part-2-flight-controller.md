---
Title: "Choosing a flight controller for a GPS drone"
Date: 2017-12-31
Author: Sergey Stadnik
Category: lifestyle
Slug: choosing-flight-controller
Series: ["Building a small GPS drone"]
Tags: [multirotors]
---

![Quadcopter](https://lh3.googleusercontent.com/-1HQcq8c4nPI/WkdMe4ga2pI/AAAAAAAA6H8/zh_5dpq3ZE0IqyvpH4UqO_4rSlCSozBXQCE0YBhgL/s800/pexels-photo-529599.jpeg)

A flight controller is the brain of any multirotor; it is the most crucial component. When my <a href="../../2016/09/alien-560-quadcopter-build-part-1-parts.html">Alien 560 quadcopter</a> <a href="https://youtu.be/SFSsMt6lBdg">fell from the sky</a>, I figured out it happened because its flight controller malfunctioned mid-flight. Therefore, when I <a href="http://ozmoroz.com/2017/11/why-i-want-autopilot.html">decided to build a new drone</a> and started choosing the components, a flight controller was the most difficult choice to make.

Racing quadcopters are the most popular segment of the market right now, and there is no shortage of racing flight controllers to choose from. However, racers don't care about an autopilot. But since I decided to build a drone with a full set of autopilot functions, I needed a flight controller which supported GPS, compass and barometer. Still, there were a few options to choose from. First of all, some racing controllers have a built-in barometer and support GPS and compass. With <a href="http://inavflight.com/">iNav</a>, a fork of popular Cleanflight autopilot software, they can be turned into pretty capable GPS-enabled machines. iNav is <a href="https://github.com/iNavFlight/inav/wiki/Supported-boards">supported</a> on a wide variety of flight controller boards and extensively tested by the development team on a few. Also, there is an excellent <a href="https://www.youtube.com/playlist?list=PLiYYhnH4BhI8DKSj5LLo2U7y5bTdqAZr1">series of videos</a> by Project Blue Falcon on Youtube on choosing a flight controller and GPS for iNav, connecting them to each other and setting them up. iNav with a racing flight controller is probably the cheapest option to build a GPS-enabled drone. However, iNav is still pretty immature, and GPS support may be unstable.

Another popular option for GPS-enabled drones is <a href="https://www.dji.com/naza-m-v2">DJI Naza</a>. DJI is the current market leader, and their Phantom and Mavic drones are well-known to consumers. They also make Naza-M flight controllers renowned among drone hobbyists for their stability and simplicity of use.

{{<figure src="https://lh3.googleusercontent.com/-Hogi68paxtI/WkhOkIBD35I/AAAAAAAA6LU/TZFmGf4BQX0nWu1QAchsAo_bcp7H9arRwCE0YBhgL/s400/Naza_m2.jpg" alt="DJI Naza-M V2" caption="DJI Naza-M V2 | Source: " attr="dji.com" attrlink="https://www.dji.com/naza-m-v2?site=brandsite&amp;from=landing_page">}}

Unfortunately, a Naza wasn't a right choice for my project. First of all, DJI controllers are designed for larger aircraft, and I was worried that I wouldn't be able to fit it into the frame I chose. Besides, while Naza is excellent for smooth cruising camera drones, they are not famous for their agile acrobatic flight capabilities. And that was the kind of flying I eventually wanted to get into.

After all the consideration I settled on a flight controller from a Pixhawk family. Pixhawk was a flight controller designed by <a href="https://pixhawk.org/">PX4 open hardware project</a> and manufactured by <a href="https://3dr.com/">3D Robotics</a> (3DR).

{{<figure src="https://lh3.googleusercontent.com/-CsIJFeTzOAo/WkhPykfS_QI/AAAAAAAA6L0/C_PxTCfuvxAS0C8X7W2JKZGt6HBaxqB0ACE0YBhgL/s640/pixhawk.jpg" alt="Pixhawk Flight Controller" caption="Pixhawk Flight Controller | Source: " attr="pixhawk.org" attrlink="https://pixhawk.org/">}}

Before DJI Mavic won consumer's hearts, 3DR were the leaders of the drone market. The pinnacle of their creation, <a href="https://3dr.com/solo-drone/">Solo smart drone</a>, released in 2015, was the most advanced consumer drone of that time. An unrivalled (at the time) simplicity of use combined with capabilities of Pixhawk flight controller and PX4 autopilot software was a truly winning combination. Unfortunately, 3DR has got complacent. They didn't present a successor to an ageing Solo in the next two years. And when DJI unveiled Mavic, 3DR lost their leadership. Subsequently, the company has entered financial dire straits and then realigned themselves towards corporate rather than consumer market.  I don't think we are likely to see any new drones from them.

Despite the 3DR's demise, PX4 series of flight controllers lives on. Thanks to the open hardware architecture, there is no shortage of Pixhawk clones available on the market. Getting one is not a problem. The problem is choosing the right one. There are all kinds of unbranded cheap Chinese Pixhawk knock-offs on Banggood and Aliexpress. Most of them work... most of the time. But for me, it just wasn't good enough.If I learned anything from my previous build, it was that if I wanted a quality result, I needed top quality components. My first quadcopter, the <a href="http://ozmoroz.com/2016/09/alien-560-quadcopter-build-part-1-parts.html">Alien 560</a>, was based on <a href="https://www.rcgroups.com/forums/showthread.php?2418029-Pixhawk-LITE-mini-pixhawk-clone">Pixhawk Lite</a> - an unexpensive PX4 clone. I managed to make it work, albeit not without an effort. For example, practically all the connectors were laid out upside down of what they should have been. It worked perfectly until it malfunctioned mid-flight, and then <a href="https://youtu.be/SFSsMt6lBdg">the copter crashed</a>. I learned the lesson, and I wasn't going to buy a cheap no-name flight controller ever again. As for the quality options, there aren't that many.

There are two flight stacks available for PX4 series of flight controllers: <a href="http://px4.io/">PX4</a> and <a href="http://ardupilot.org/">ArduPilot</a>. Flight stack is an autopilot firmware which runs on a flight controller. Ardupilot is more popular among DIY drone community since it is being developed more actively and it has more features than PX4. Ardupilot documentation <a href="http://ardupilot.org/copter/docs/common-autopilots.html">lists the compatible hardware options</a> on its wiki page. Unfortunately, that page is outdated. For example, the original <a href="http://ardupilot.org/copter/docs/common-pixhawk-overview.html">Pixhawk</a> is not manufactured by 3DR any longer. To make things more complicated, I needed not just a quality PX4 flight controller but also a small one, since I was going to put it into a small size frame. Unfortunately, most of the PX4 controllers are quite large. However, there are a few that were designed with small racing drones in mind. I narrowed down my choice to 2 options which ticked both quality and size boxes: <a href="https://pixhawk.org/modules/pixracer">Pixracer</a> and <a href="http://www.holybro.com/product/8">Pixfalcon</a>. These two are very similar, although Pixracer has a bit more advanced hardware and better connectivity. Unfortunately, ordering a <a href="https://store.mrobotics.io/category-s/112.htm">genuine </a>Pixracer was a too expensive option for me, and I didn't want to settle for one of its countless no-name clones. On the other hand, Hobbyking offered a reasonable price on <a href="https://hobbyking.com/en_us/pixfalcon-micro-px4-autopilot-plus-micro-m8n-gps-and-mega-pbd-power-module.html">Pixfalcon package</a> with a quality combo GPS/compass unit and a PDB (power distribution board) with a built-in power module, which is necessary to power the flight controller. Moreover, Pixfalcon looked suspiciously similar to the official 3DR <a href="https://store.3dr.com/products/3dr-pixhawk">Pixhawk Mini</a>. Therefore, I settled on Pixfalcon.

{{<figure src="https://lh3.googleusercontent.com/-AOHTtmJapLE/WkhR1k-0JGI/AAAAAAAA6Mc/dCLm1poVZwwiU1tjYv1vA-lLYvO08l_lwCE0YBhgL/s320/pixfalcon.png" alt="Pixfalcon flight controller" caption="Pixfalcon flight controller | Source: " attr="www.holybro.com" attrlink="http://www.holybro.com/product/8">}}

Later I found out that CUAV released a <a href="http://www.cuav.net/?dt_portfolio=pixhack-nano-%E6%97%A0%E4%BA%BA%E6%9C%BA%E6%8E%A7%E5%88%B6%E7%B3%BB%E7%BB%9F">Pixhawk Nano</a> flight controller, which could also have been a viable choice, but it was too late.